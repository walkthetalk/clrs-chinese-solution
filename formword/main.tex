% ==================== Main text ====================>

\define\prdname{生字组词}

\setupinteraction[
  state=start,
  color=blue,
  contrastcolor=blue,
  style=bold,
  title={生字组词},
  author={倪慶亮},
  subtitle={},
  keyword={生字 组词},
]

\setuplayout[
  % vertical
  top=0mm,
    topdistance=0mm,
      header=0mm,
        headerdistance=0mm,
        footerdistance=0mm,
      footer=0mm,
    bottomdistance=0mm,
  bottom=0mm,
  topspace=0mm,%\dimexpr(\topheight + \topdistance),
  bottomspace=0mm,%\dimexpr(\bottomheight + \bottomdistance),
  height=fit,
  % horizontal
  leftedge=0mm,
    leftedgedistance=0mm,
      leftmargin=0mm,
        leftmargindistance=0mm,
        rightmargindistance=0mm,
      rightmargin=0mm,
    rightedgedistance=0mm,
  rightedge=0mm,
  backspace=0mm,%\dimexpr(\leftedgewidth + \leftedgedistance + \leftmarginwidth + \leftmargindistance + 5mm),
  cutspace=0mm,%\dimexpr(\rightedgewidth + \rightedgedistance + \rightmarginwidth + \rightmargindistance),
  width=fit,
  % misc
  location=middle,
  marking=on
]

\startluacode
function commands.splitwords(str)
	words = string.split(str, ' ')
	groupsize = 4
	for i=1,#words,groupsize do
		tex.sprint('\\startxrow[frame=on]')
		tex.sprint('\\startxcell')
		for k = 0,3 do
			idx = i + k
			if (idx > #words) then
				break
			end
			chars = utf.split(words[idx])
			for j=1,#chars do
				tex.sprint(chars[j])
			end
			if (i ~= #words) and (k ~= 3) then
				tex.sprint('\\kern.5em')
			end
		end
		tex.sprint('\\stopxcell')
		tex.sprint('\\stopxrow')
	end
end
\stopluacode

\define[1]\fword{
\ctxlua{commands.splitwords('#1')}
}

% main text
\starttext

\startcolumns[n=3]
\startxtable[
  align={lohi},
  bodyfont={tt,18pt},
  %width=48pt,
  height=22pt,
  split=yes,
  %strut=none,
  loffset=0pt,
  roffset=0pt,
  toffset=1pt,
  %boffset=1pt,
  frame=off,
]
  \fword{可以 可是 认可 许可}
  \fword{东西 房东 东方 做东}
  \fword{东西 西风 西服 西域}
  \fword{天地 蓝天 天空 天气}
  \fword{四季 四肢 四只 四个}
  \fword{是非 国是 但是 可是}
  \fword{女儿 女生 男女 少女}
  \fword{开门 开关 打开 开始}
  \fword{小孩 大小 小心 小牛}
  \fword{少数 少年 少儿 多少}
  \fword{吹牛 牛奶 公牛 母牛}
  \fword{水果 果园 结果 果实}
  \fword{小鸟 鸟鸣 飞鸟 鸵鸟}
  \fword{早晨 早饭 清早 迟早}
  \fword{书包 书画 书写 读书}
  \fword{小刀 剪刀 菜刀 刀鱼}
  \fword{尺寸 戒尺 标尺 尺度}
  \fword{课本 本质 本领 根本}
  \fword{木材 麻木 树木 木鸡}
  \fword{树林 碑林 林林总总}
  \fword{领土 故土 土地 土壤}
  \fword{力量 视力 尽力 力度}
  \fword{中心 心理 心地 心得}
  \fword{中间 中华 中文 中听}
  \fword{五官 五毒 五行 五岳}
  \fword{立正 立场 独立 立刻}
  \fword{正午 正当 正义 正骨}
  \fword{在场 存在 在于 在世}
  \fword{后进 先后 前后 后辈}
  \fword{我们 自我 舍我其谁}
  \fword{好歹 友好 好奇 安好}
  \fword{长短 特长 成长 首长}
  \fword{比较 比赛 比邻 比如}
  \fword{尾巴 巴望 巴结 巴掌}
  \fword{把玩 把握 把守 车把}
  \fword{下车 下书 下班 下令}
  \fword{个性 个子 各个击破}
  \fword{下雨 雨季 雨伞 雨露}
  \fword{你们 我们 他们 咱们}
  \fword{询问 过问 问候 审问}
  \fword{有关 有劳 没有 所有}
  \fword{半夜 半百 半圆 一半}
  \fword{从来 从前 侍从 从业}
  \fword{你们 你我 你追我赶}
  \fword{才能 刚才 人才 才干}
  \fword{明天 明显 英明 明亮}
  \fword{相同 同学 同步 同胞}
  \fword{学校 学生 学习 学徒}
  \fword{自白 自馁 自从 自然}
  \fword{知己 自己 安分守己}
  \fword{衣服 衣冠 衣锦还乡}
  \fword{白色 明白 空白 告白}
  \fword{的确 目的 无的放矢}
  \fword{又及 又且 又名 又复}
  \fword{和睦 和煦 和议 温和}
  \fword{竹子 竹简 竹笋 丝竹}
  \fword{牙齿 牙膏 牙刷 牙碜}
  \fword{马匹 马蜂 马虎 马褂}
  \fword{用心 功用 费用 用饭}
  \fword{几乎 几何 几案 几许}
  \fword{只身 只是 只管 只能}
  \fword{药石 金石 石雕 石油}
  \fword{多寡 多余 多嘴 多谢}
  \fword{出访 出色 出处 出勤}
  \fword{罕见 见效 接见 见解}
  \fword{对称 对待 对仗 核对}
  \fword{妈妈 姑妈 姨妈 舅妈}
  \fword{齐全 全部 保全 安全}
  \fword{回眸 回旋 回绝 回合}
  \fword{工业 工整 竣工 工作}
  \fword{厂房 矿厂 厂商 厂家}
\stopxtable
\stopcolumns

\stoptext
